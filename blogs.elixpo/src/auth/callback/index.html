<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Authentication - LixBlogs</title>
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" type="image/x-icon" href="../../../CSS/IMAGES/logo.png" />
    <style>
      @import url("https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap");

      .gradient-bg {
        background: linear-gradient(135deg, #030712 0%, #10141e 50%, #1a1f2e 100%);
      }

      .pulse-animation {
        animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
      }

      .slide-up {
        animation: slideUp 0.6s ease-out forwards;
      }

      .fade-in {
        animation: fadeIn 0.8s ease-out forwards;
      }

      .handshake-animation {
        animation: handshake 2s ease-in-out infinite;
      }

      .auth-progress {
        animation: authProgress 3s ease-in-out infinite;
      }

      .glow-effect {
        box-shadow: 0 0 20px rgba(141, 73, 253, 0.3), 0 0 40px rgba(127, 86, 243, 0.2);
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.7;
        }
      }

      @keyframes slideUp {
        from {
          opacity: 0;
          transform: translateY(30px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes handshake {
        0%,
        100% {
          transform: rotate(0deg) scale(1);
        }
        25% {
          transform: rotate(-10deg) scale(1.05);
        }
        50% {
          transform: rotate(10deg) scale(1.1);
        }
        75% {
          transform: rotate(-5deg) scale(1.05);
        }
      }

      @keyframes authProgress {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      .provider-icon {
        transition: all 0.3s ease;
      }

      .provider-icon:hover {
        transform: scale(1.05);
      }

      .success-checkmark {
        animation: checkmark 0.6s ease-in-out;
      }

      @keyframes checkmark {
        0% {
          transform: scale(0);
        }
        50% {
          transform: scale(1.2);
        }
        100% {
          transform: scale(1);
        }
      }

      .loading-dots::after {
        content: "";
        animation: dots 1.5s steps(4, end) infinite;
      }

      @keyframes dots {
        0%,
        20% {
          content: "";
        }
        40% {
          content: ".";
        }
        60% {
          content: "..";
        }
        80%,
        100% {
          content: "...";
        }
      }

      .connection-line {
        position: relative;
        overflow: hidden;
      }

      .connection-line::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(141, 73, 253, 0.6), transparent);
        animation: connectionFlow 2s ease-in-out infinite;
      }

      @keyframes connectionFlow {
        0% {
          left: -100%;
        }
        100% {
          left: 100%;
        }
      }

      .particle {
        position: absolute;
        width: 4px;
        height: 4px;
        background: linear-gradient(45deg, #8d49fd, #7f56f3, #5691f3);
        border-radius: 50%;
        animation: particleFloat 3s ease-in-out infinite;
      }

      .particle:nth-child(1) {
        animation-delay: 0s;
      }
      .particle:nth-child(2) {
        animation-delay: 0.5s;
      }
      .particle:nth-child(3) {
        animation-delay: 1s;
      }
      .particle:nth-child(4) {
        animation-delay: 1.5s;
      }
      .particle:nth-child(5) {
        animation-delay: 2s;
      }

      @keyframes particleFloat {
        0%,
        100% {
          opacity: 0;
          transform: translateY(0) scale(0);
        }
        50% {
          opacity: 1;
          transform: translateY(-20px) scale(1);
        }
      }
    </style>
  </head>
  <body class="gradient-bg min-h-screen flex items-center justify-center font-['Inter',sans-serif] p-4 relative overflow-hidden">
    <!-- Floating Particles -->
    <div class="particle" style="top: 20%; left: 10%"></div>
    <div class="particle" style="top: 60%; right: 15%"></div>
    <div class="particle" style="top: 40%; left: 80%"></div>
    <div class="particle" style="top: 80%; left: 20%"></div>
    <div class="particle" style="top: 30%; right: 80%"></div>

    <!-- Main Container -->
    <div class="w-full max-w-md mx-auto relative z-10">
      <!-- Header with Logo -->
      <div class="text-center mb-8 fade-in">
        <div class="flex justify-center items-center mb-4">
          <div
            class="h-16 w-16 rounded-full bg-gradient-to-br from-[#8d49fd] to-[#5691f3] flex items-center justify-center border-2 border-[#1D202A] glow-effect"
          >
            <ion-icon name="logo-github" class="text-3xl text-white"></ion-icon>
          </div>
        </div>
        <h1 class="text-2xl font-bold text-white mb-2">LixBlogs</h1>
        <p class="text-gray-400 text-sm">Secure Authentication</p>
      </div>

      <!-- Authentication Card -->
      <div
        class="bg-[#10141E]/90 backdrop-blur-sm border border-[#1D202A] rounded-2xl p-8 shadow-2xl slide-up relative overflow-hidden"
      >
        <!-- Connection Line Effect -->
        <div class="connection-line absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-[#8d49fd] to-[#5691f3]"></div>

        <!-- Provider Info Section -->
        <div class="flex items-center justify-between mb-8">
          <!-- User Info Placeholder -->
          <div class="flex items-center space-x-3">
            <div
              id="userAvatar"
              class="w-12 h-12 rounded-full bg-gradient-to-br from-[#8d49fd] to-[#5691f3] flex items-center justify-center text-white font-semibold text-lg hidden border border-[#1D202A]"
            >
              ?
            </div>
            <div id="userInfo" class="hidden">
              <div id="userName" class="text-white font-medium text-sm">Loading...</div>
              <div id="userEmail" class="text-gray-400 text-xs">Verifying identity</div>
            </div>
            <!-- Loading State -->
            <div id="loadingUser" class="flex items-center space-x-3">
              <div class="w-12 h-12 rounded-full bg-[#1D202A] animate-pulse border border-[#313647]"></div>
              <div>
                <div class="w-24 h-4 bg-[#1D202A] rounded animate-pulse mb-2"></div>
                <div class="w-32 h-3 bg-[#1D202A] rounded animate-pulse"></div>
              </div>
            </div>
          </div>

          <!-- Provider Logo -->
          <div class="flex items-center space-x-2">
            <div id="providerIcon" class="provider-icon">
              <!-- Will be populated by JavaScript -->
            </div>
          </div>
        </div>

        <!-- Status Section -->
        <div class="text-center mb-6">
          <div id="statusIcon" class="mb-4">
            <!-- Custom Handshake Animation -->
            <div
              class="inline-flex items-center justify-center w-20 h-20 rounded-full bg-gradient-to-br from-[#8d49fd] to-[#5691f3] border-2 border-[#1D202A] glow-effect"
            >
              <ion-icon name="handshake-outline" class="text-4xl text-white handshake-animation"></ion-icon>
            </div>
          </div>

          <h2 id="statusTitle" class="text-xl font-semibold text-white mb-2">
            Establishing Secure Connection<span class="loading-dots"></span>
          </h2>

          <p id="status" class="text-gray-400 text-sm leading-relaxed">
            We're securely connecting you to LixBlogs with end-to-end encryption.
          </p>
        </div>

        <!-- Progress Bar -->
        <div class="mb-6">
          <div class="w-full bg-[#1D202A] rounded-full h-3 overflow-hidden border border-[#313647]">
            <div
              id="progressBar"
              class="h-full bg-gradient-to-r from-[#8d49fd] via-[#7f56f3] to-[#5691f3] auth-progress rounded-full transition-all duration-1000 ease-out w-0 shadow-lg"
            ></div>
          </div>
          <div class="flex justify-between text-xs text-gray-500 mt-2">
            <span>üîí Secure</span>
            <span id="progressText">0%</span>
            <span>‚úÖ Complete</span>
          </div>
        </div>

        <!-- Action Buttons (Hidden by default) -->
        <div id="actionButtons" class="hidden space-y-3">
          <button
            id="retryBtn"
            class="w-full py-3 bg-gradient-to-r from-[#8d49fd] to-[#5691f3] hover:from-[#7f56f3] hover:to-[#5691f3] text-white rounded-lg font-medium transition-all duration-200 transform hover:scale-[1.02] border border-[#1D202A] glow-effect"
          >
            üîÑ Try Again
          </button>
          <button
            id="backBtn"
            class="w-full py-3 bg-[#1D202A] hover:bg-[#23395d] text-gray-300 rounded-lg font-medium transition-all duration-200 border border-[#313647] hover:border-[#5691f3]/50"
          >
            ‚Üê Back to Login
          </button>
        </div>
      </div>

      <!-- Footer -->
      <div class="text-center mt-6 fade-in">
        <p class="text-gray-500 text-xs flex items-center justify-center space-x-2">
          <ion-icon name="shield-checkmark-outline" class="text-green-500"></ion-icon>
          <span>Protected by LixBlogs Security</span>
        </p>
      </div>
    </div>

    <script src="../../../JS/linkRedirect.js"></script>
    <script src="../../../JS/auth/callbackHelper.js"></script>
    <script src="../../../JS/auth/callbackUI.js"></script>
  </body>
</html>
